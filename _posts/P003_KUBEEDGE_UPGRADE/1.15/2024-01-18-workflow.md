---

---
## Project Name:  ÌîåÎû´ÌèºÏóê kubeedge Ï†ÅÏö©ÏãúÌÇ§Í∏∞ 
#### Date: 2024-01-18 09:18 
#### Tag:
##### ref: [podSandBoxImage](https://velog.io/@nigasa12/pod%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EC%B0%B0-feat-sandbox-pod%EC%99%80-pause-container)
---

# ÏÑ§Ïπò
keadm init --advertise-address="133.186.218.52" --profile version=v1.15.1 --kube-config=/root/.kube/config 

cp keadm-v1.15.1-linux-amd64/keadm/keadm /usr/local/bin/keadm
```bash
keadm join --cloudcore-ipport="133.186.218.52":30000 --token=7bf1b7822e8a8aa81c22d85a1ce63ef694c1d64922721089fec6073cb39c0ce9.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDU2NDE1MzN9.Cn0ciW7ncs-qWOn05dL_xlnZuZzA1aSX0rySa4p6HNw --kubeedge-version=v1.15.1 --remote-runtime-endpoint=unix:///var/run/crio/crio.sock
```



133.186.218.52

helm upgrade --install cloudcore ./cloudcore --namespace kubeedge --create-namespace -f ./cloudcore/values.yaml --set cloudCore.modules.cloudHub.advertiseAddress[0]=133.186.218.52

```bash
wget https://storage.googleapis.com/cri-o/artifacts/cri-o.amd64.v1.26.4.tar.gz
tar xvf cri-o.amd64.v1.26.4.tar.gz 
ls
cd cri-o
ll
./install 
systemctl restart crio
systemctl status crio
```

```bash
keadm join --cloudcore-ipport="133.186.251.185":30001 --token=7bf1b7822e8a8aa81c22d85a1ce63ef694c1d64922721089fec6073cb39c0ce9.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDU2NDA5MjZ9.CyjkRusYkQDRhkdApBrd-zciCLX16Gqg2dGd3na961k --kubeedge-version=v1.15.1 --remote-runtime-endpoint=unix:///var/run/crio/crio.sock
```


```bash
vi /etc/containers/registries.conf
```
```conf
unqualified-search-registries = ["docker.io", "quay.io"]
```

# Î¶¨ÏÜåÏä§
### role/keadm_init/tasks/main.yml
## 01-ha-prepare.yaml
    - Namespace, ServiceAccount, ClusterRole, ClusterRoleBinding, CustomResourceDefinition, CustomResourceDefinition,CustomResourceDefinition

## üìå cloudcore configmap.yaml
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudcore
  namespace: kubeedge
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
data:
  cloudcore.yaml: |
    apiVersion: cloudcore.config.kubeedge.io/v1alpha2
    commonConfig:
      monitorServer:
        bindAddress: 127.0.0.1:9091
      tunnelPort: 10352
    kind: CloudCore
    kubeAPIConfig:
      burst: 10000
      contentType: application/vnd.kubernetes.protobuf
      kubeConfig: ""
      master: ""
      qps: 5000
    modules:
      cloudHub:
        advertiseAddress:
        - {CLOUDCORE_VIP}
        dnsNames:
        - ""
        edgeCertSigningDuration: 365
        enable: true
        https:
          address: 0.0.0.0
          enable: true
          port: 10002
        keepaliveInterval: 30
        nodeLimit: 10
        quic:
          address: 0.0.0.0
          enable: false
          maxIncomingStreams: 10000
          port: 10001
        tlsCAFile: /etc/kubeedge/ca/rootCA.crt
        tlsCAKeyFile: /etc/kubeedge/ca/rootCA.key
        tlsCertFile: /etc/kubeedge/certs/edge.crt
        tlsPrivateKeyFile: /etc/kubeedge/certs/edge.key
        tokenRefreshDuration: 12
        unixsocket:
          address: unix:///var/lib/kubeedge/kubeedge.sock
          enable: true
        websocket:
          address: 0.0.0.0
          enable: true
          port: 10000
        writeTimeout: 30
      cloudStream:
        enable: false
        streamPort: 10003
        tlsStreamCAFile: /etc/kubeedge/ca/streamCA.crt
        tlsStreamCertFile: /etc/kubeedge/certs/stream.crt
        tlsStreamPrivateKeyFile: /etc/kubeedge/certs/stream.key
        tlsTunnelCAFile: /etc/kubeedge/ca/rootCA.crt
        tlsTunnelCertFile: /etc/kubeedge/certs/server.crt
        tlsTunnelPrivateKeyFile: /etc/kubeedge/certs/server.key
        tunnelPort: 10004
      deviceController:
        buffer:
          deviceEvent: 1
          deviceModelEvent: 1
          updateDeviceStatus: 1024
        enable: true
        load:
          updateDeviceStatusWorkers: 1
      dynamicController:
        enable: true
      edgeController:
        buffer:
          configMapEvent: 1
          createLease: 2024
          createNode: 1024
          createPod: 1024
          deletePod: 1024
          patchNode: 1524
          patchPod: 1024
          podEvent: 1
          queryConfigMap: 1024
          queryLease: 1024
          queryNode: 2024
          queryPersistentVolume: 1024
```
#### edgecore.yaml
```yaml
apiVersion: edgecore.config.kubeedge.io/v1alpha2
database:
  aliasName: default
  dataSource: /var/lib/kubeedge/edgecore.db
  driverName: sqlite3
kind: EdgeCore
modules:
  dbTest:
    enable: false
  deviceTwin:
    enable: true
  edgeHub:
    enable: true
    heartbeat: 15
    httpServer: https://133.186.218.52:10002
    messageBurst: 60
    messageQPS: 30
    projectID: e632aba927ea4ac2b575ec1603d56f10
    quic:
      enable: false
      handshakeTimeout: 30
      readDeadline: 15
      server: 172.16.11.32:10001
      writeDeadline: 15
    rotateCertificates: true
    tlsCaFile: /etc/kubeedge/ca/rootCA.crt
    tlsCertFile: /etc/kubeedge/certs/server.crt
    tlsPrivateKeyFile: /etc/kubeedge/certs/server.key
    token: ""
    websocket:
      enable: true
      handshakeTimeout: 30
      readDeadline: 15
      server: 133.186.218.52:30000
      writeDeadline: 15
  edgeStream:
    enable: false
    handshakeTimeout: 30
    readDeadline: 15
    server: 133.186.218.52:10004
    tlsTunnelCAFile: /etc/kubeedge/ca/rootCA.crt
    tlsTunnelCertFile: /etc/kubeedge/certs/server.crt
    tlsTunnelPrivateKeyFile: /etc/kubeedge/certs/server.key
    writeDeadline: 15
  edged:
    containerRuntime: remote
    enable: true
    hostnameOverride: edtest3
    masterServiceNamespace: default
    maxContainerCount: -1
    maxPerPodContainerCount: 1
    minimumGCAge: 0s
    podSandboxImage: kubeedge/pause:3.6
    registerNode: true
    registerNodeNamespace: default
    registerSchedulable: true
    remoteImageEndpoint: unix:///var/run/crio/crio.sock
    remoteRuntimeEndpoint: unix:///var/run/crio/crio.sock
    rootDirectory: /var/lib/edged
    tailoredKubeletConfig:
      address: 127.0.0.1
      cgroupDriver: cgroupfs
      cgroupsPerQOS: true
      clusterDomain: cluster.local
      configMapAndSecretChangeDetectionStrategy: Get
      containerLogMaxFiles: 5
      containerLogMaxSize: 10Mi
      contentType: application/json
      cpuCFSQuota: true
      cpuCFSQuotaPeriod: 100ms
      cpuManagerPolicy: none
      cpuManagerReconcilePeriod: 10s
      enableControllerAttachDetach: true
      enableDebugFlagsHandler: true
      enableDebuggingHandlers: true
      enableProfilingHandler: true
      enableSystemLogHandler: true
      enforceNodeAllocatable:
      - pods
      evictionHard:
        imagefs.available: 15%
        memory.available: 100Mi
        nodefs.available: 10%
        nodefs.inodesFree: 5%
      evictionPressureTransitionPeriod: 5m0s
      failSwapOn: false
      hairpinMode: promiscuous-bridge
      imageGCHighThresholdPercent: 80
      imageGCLowThresholdPercent: 40
      imageMinimumGCAge: 2m0s
      iptablesDropBit: 15
      iptablesMasqueradeBit: 14
      logging:
        flushFrequency: 5000000000
        format: text
        options:
          json:
            infoBufferSize: "0"
        verbosity: 0
      makeIPTablesUtilChains: true
      maxOpenFiles: 1000000
      maxPods: 110
      memoryManagerPolicy: None
      memorySwap: {}
      memoryThrottlingFactor: 0.8
      nodeLeaseDurationSeconds: 40
      nodeStatusMaxImages: 0
      nodeStatusReportFrequency: 5m0s
      nodeStatusUpdateFrequency: 10s
      oomScoreAdj: -999
      podPidsLimit: -1
      readOnlyPort: 10350
      registerNode: true
      registryBurst: 10
      registryPullQPS: 5
      resolvConf: /etc/resolv.conf
      runtimeRequestTimeout: 2m0s
      seccompDefault: false
      serializeImagePulls: true
      shutdownGracePeriod: 0s
      shutdownGracePeriodCriticalPods: 0s
      staticPodPath: /etc/kubeedge/manifests
      streamingConnectionIdleTimeout: 4h0m0s
      syncFrequency: 1m0s
      topologyManagerPolicy: none
      topologyManagerScope: container
      volumePluginDir: /usr/libexec/kubernetes/kubelet-plugins/volume/exec/
      volumeStatsAggPeriod: 1m0s
  eventBus:
    enable: true
    eventBusTLS:
      enable: false
      tlsMqttCAFile: /etc/kubeedge/ca/rootCA.crt
      tlsMqttCertFile: /etc/kubeedge/certs/server.crt
      tlsMqttPrivateKeyFile: /etc/kubeedge/certs/server.key
    mqttMode: 2
    mqttPassword: ""
    mqttPubClientID: ""
    mqttQOS: 0
    mqttRetain: false
    mqttServerExternal: tcp://127.0.0.1:1883
    mqttServerInternal: tcp://127.0.0.1:1884
    mqttSessionQueueSize: 100
    mqttSubClientID: ""
    mqttUsername: ""
  metaManager:
    contextSendGroup: hub
    contextSendModule: websocket
    enable: true
    metaServer:
      apiAudiences: null
      enable: false
      server: 127.0.0.1:10550
      serviceAccountIssuers:
      - https://kubernetes.default.svc.cluster.local
      serviceAccountKeyFiles: null
      tlsCaFile: /etc/kubeedge/ca/rootCA.crt
      tlsCertFile: /etc/kubeedge/certs/server.crt
      tlsPrivateKeyFile: /etc/kubeedge/certs/server.key
    remoteQueryTimeout: 60
  serviceBus:
    enable: false
    port: 9060
    server: 127.0.0.1
    timeout: 60    
```






## üìå cloudcore deployment.yaml service.yaml
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
  name: cloudcore
spec:
  replicas: 1
  selector:
    matchLabels:
      k8s-app: kubeedge
      kubeedge: cloudcore
  template:
    metadata:
      labels:
        k8s-app: kubeedge
        kubeedge: cloudcore
    spec:
      hostNetwork: true
      dnsPolicy: ClusterFirstWithHostNet
      restartPolicy: Always
      affinity: 
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: node-role.kubernetes.io/edge
                operator: DoesNotExist
      serviceAccount: cloudcore  
      containers:
      - name: cloudcore
        image: kubeedge/cloudcore:v1.15.1
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 10000
          name: cloudhub
          protocol: TCP
        - containerPort: 10001
          name: cloudhub-quic
          protocol: TCP
        - containerPort: 10002
          name: cloudhub-https
          protocol: TCP
        - containerPort: 10003
          name: cloudstream
          protocol: TCP
        - containerPort: 10004
          name: tunnelport
          protocol: TCP
        volumeMounts:
        - name: conf
          mountPath: /etc/kubeedge/config
        - name: certs
          mountPath: /etc/kubeedge
        - name: sock
          mountPath: /var/lib/kubeedge
        - mountPath: /etc/localtime
          name: host-time
          readOnly: true
        securityContext: 
          privileged: true
        resources: 
          limits:
            cpu: 200m
            memory: 1Gi
          requests:
            cpu: 100m
            memory: 512Mi 
      volumes:
      - name: conf
        configMap:
          name: cloudcore
      - name: certs
        secret:
          secretName: cloudcore
          items:
          - key: stream.crt
            path: certs/stream.crt
          - key: stream.key
            path: certs/stream.key
          - key: streamCA.crt
            path: ca/streamCA.crt
      - name: sock
        hostPath:
          path: /var/lib/kubeedge
          type: DirectoryOrCreate
      - hostPath:
          path: /etc/localtime
          type: ""
        name: host-time
---
apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
  name: cloudcore
spec:
  type: ClusterIP
  ports:
  - port: 10000
    targetPort: 10000
    name: cloudhub
  - port: 10001
    targetPort: 10001
    name: cloudhub-quic
  - port: 10002
    targetPort: 10002
    name: cloudhub-https
  - port: 10003
    targetPort: 10003
    name: cloudstream
  - port: 10004
    targetPort: 10004
    name: tunnelport
  selector:
    k8s-app: kubeedge
    kubeedge: cloudcore
```

# ‚ùå yaml
```yaml
# Source: cloudcore/templates/secret_cloudcore.yaml
apiVersion: v1
kind: Secret
metadata:
  name: cloudcore
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
  annotations:
    "helm.sh/hook": "pre-install"
    "helm.sh/hook-delete-policy": "before-hook-creation"
data:
  streamCA.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lRSk5tQWRYdFVhMXJQbXpZT1VNNjhYREFOQmdrcWhraUc5dzBCQVFzRkFEQVgKTVJVd0V3WURWUVFERXd4amJHOTFaR052Y21VdFkyRXdIaGNOTWpRd01URTRNRFF4TmpBeFdoY05NalV3TVRFMwpNRFF4TmpBeFdqQVhNUlV3RXdZRFZRUURFd3hqYkc5MVpHTnZjbVV0WTJFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCCkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEa3oyWlBML0NqZzJsZ3NZbTdGMnZjdmk3c3NuYzYrQ2x1bCtDYzdDUmMKN0pZVjY4KzZZc2REUU9Ubm5QSkxVTmY0cStTdCtJTXQrVGI2REhjVmdMWWkyL3RVUENWZ2t0U09Xb3V2THRZdwpLeEpjOWlWV2R6eW13NDA1WmJmZUN4VVlibUN0S2NFUlNMbWxTNWJaWG9YZDd3RmlWVnY3R1RRR2MvcEJrNkNRCkNxS2NmWnFLNVJueS94ZkxFQ25nUHMxdmZFQkpIUE5iNDBTTER5SWVwL3dRUHZ1a25wdDk5di9IU3RzR2k2TFoKTVo1aVZuQ3ZIamgrdzBEQU1hVHAzZFUxeHdzUVZsdDFCQjhKY0xhV1JKeHNuYU92bzRQeWVtRGFTUnJobEpjMgpVVmh4bkVHZWYySEhoWnplZDBaRXQ0emVWaGUrL0tNSW1BdjZZeHhwNWRjcEFnTUJBQUdqWVRCZk1BNEdBMVVkCkR3RUIvd1FFQXdJQ3BEQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUhBd0l3RHdZRFZSMFQKQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVXRXRUM2L21Hb0hpV25iZFJOd3ZBc2lUWFc4WXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQU42NlVnUWJ5a1ZqcVB0WUtwenpleG1JaFhsNmJqeUNRbEh4M3ZPTit2TVgxZ3o1CnMvT3lac1NWeU1UOGh5cGlVNFNZWmgxT213VHVJS0J1RXlDRlF5L2NkeE9DazhjWDFjV3VSMHZ6VHU0T3Zqam8KM1huSXl5ajltY293SlNiYnhHNXNjMUZGcmpPVEwxcTV1dzh4WjRuSStxRHIyS3ZxbVhUY2RpdGVkT3FGU0g4NwpZdzFMc1ppZUNMSlo5cDdnRDF6T0dscE53MDM0Z3BDR2pHMjFHV0hMNi9yZEdKOGpBNXJERGZLNm14alZxS3p1CnpuN3oxUlpKazFpWmVjVElERXpkUmpGVFhvekpBWENoS0lFaENvRHBCQnFjMmxvZkxyTHorampGam5pUFVJWmkKK29IQzdKV2Jab3dWOVEwYnBocHl1QTE2cDVvZDBSdkhReXZHOFdrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  stream.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURUakNDQWphZ0F3SUJBZ0lRYXRCeC95MlQyVGNKN0lPcW1adkM1akFOQmdrcWhraUc5dzBCQVFzRkFEQVgKTVJVd0V3WURWUVFERXd4amJHOTFaR052Y21VdFkyRXdIaGNOTWpRd01URTRNRFF4TmpBeFdoY05NalV3TVRFMwpNRFF4TmpBeFdqQVVNUkl3RUFZRFZRUURFd2xqYkc5MVpHTnZjbVV3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBCkE0SUJEd0F3Z2dFS0FvSUJBUURCMGtjVEc4OXVjTUdKNDdMVVVEYlFUSlpCandkTnVGTG4wS21xczd2NDQ1MkwKOFNnQnkzd2V2UGE5b1d3L1ZZdHNtWHk2WVpFemo1eldIaG00VnBzNWlOczR1QnlRTDA4TkxacTc4djl5R3d1YwpLdGZiSVNvL0FZY01aRDNDajlFamF3aEZ2UXk5Y2dhZWh6N2NCMXc0SlQ5NldvVEYyRTJES1RwYlE2ZWFFUGVJCmxmWTQvK0NRaWh1MmFyM2lsWmtudUFQa0hRTDZDM2liNnZjR2ZYd2c2RDU3YWNjRVh2Ni84R3lYK3FmOUNCQUEKUVluZGgwVWVQaWljekxqUkZUVWVRQXpla0kwOU9WNDVVTkJnWG84LzBCa2NOSmZFTUhwbUtJbkM1b3d1NFllSApOSzN6N1gxdHE0MXZ4Qlpjdm15VHd3Uk1jQnFmTHNhclJKMnJubWZsQWdNQkFBR2pnWmd3Z1pVd0RnWURWUjBQCkFRSC9CQVFEQWdXZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFNQmdOVkhSTUIKQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRkxWaEF1djVocUI0bHAyM1VUY0x3TElrMTF2R01EVUdBMVVkRVFRdQpNQ3lDRW1Oc2IzVmtZMjl5WlM1cmRXSmxaV1JuWllJV1kyeHZkV1JqYjNKbExtdDFZbVZsWkdkbExuTjJZekFOCkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQUZQWG9FUUZPdjUvOGUrZmhsYld3a0dMNkJ0dUlPdjZvZXMySnI1Z2YKL3VuKzQ2OXdJaENZdXdCWFBlcSsxNzJ5ZDBKZFB3cUV6R3lIRGNHNTdiSEZmNTlCZHR4TWpZbHNDUC9EaFZCegpSTHhwblY2THcyb2JIRDJoU0RiaEZjLy9lS1I5bWMzK041YkpsbWJQd2xCTlhac0ZwUnpXdlQzakdxa01tanljCk5NNTg5TjgyNWhPdmtqQ3RwYkxaMUY1WEo0Q0Y5dnhTbjZ2TmhLV0VGRUVYYUNtcC9pcEdIK1JkbzhBVXZhcWIKYVVQN20xdVN4TG1pRWYwUTRodENQVldUME1scC9RN1A0OEdhU2dXQXZUdTdjWU85Q0dwZWRXOWozM2tsK0V3YgpNRjlpSUhDTGNleHU5Y2dkTDY2NS9jSXNYb040RGtJcmY1MmpHQ0RsanAzVHZRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  stream.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBd2RKSEV4dlBibkRCaWVPeTFGQTIwRXlXUVk4SFRiaFM1OUNwcXJPNytPT2RpL0VvCkFjdDhIcnoydmFGc1AxV0xiSmw4dW1HUk00K2MxaDRadUZhYk9ZamJPTGdja0M5UERTMmF1L0wvY2hzTG5DclgKMnlFcVB3R0hER1E5d28vUkkyc0lSYjBNdlhJR25vYyszQWRjT0NVL2VscUV4ZGhOZ3lrNlcwT25taEQzaUpYMgpPUC9na0lvYnRtcTk0cFdaSjdnRDVCMEMrZ3Q0bStyM0JuMThJT2crZTJuSEJGNyt2L0JzbC9xbi9RZ1FBRUdKCjNZZEZIajRvbk15NDBSVTFIa0FNM3BDTlBUbGVPVkRRWUY2UFA5QVpIRFNYeERCNlppaUp3dWFNTHVHSGh6U3QKOCsxOWJhdU5iOFFXWEw1c2s4TUVUSEFhbnk3R3EwU2RxNTVuNVFJREFRQUJBb0lCQUczV0R3Y0tKSVBPakM3cgpCVVdCNjM0aFdLandOOUJZVzBzWkdYMHQrNkR3eERBd3lsNHlCVFdhR2kyZVU2eVVlcjFoUWFpUmIrcUxRUEtwCi9pTlRtUVdDdzlDaHJUWWNTUzBMb2Z0T21tbjhYNWp4UW4vZ2pJTkdCMVVEWFdocmZiWVhpb21TdDZ5SCtLNVAKc0ZTYUt5MTZGajN0Ry83T05DYlc3MFlXMGR6aE1WWkpSUHVpOHlRWXZHSWVZb1l1TnN5MGhHSHJUNVpCZXJ3WApBK3JVOXBCTnk0NFFnaWtHbjRoMjFLaUM3OWdyZ1V2MzZudTNUb0dWMmVxYys3NElKNU56M0dWQ21kUHZRenJCCjE1NW1WRGlaNjRUSnNKdDZIaEd0OEJ3TXE3WDNWSzlwNGMxc2hNSzdheERLTTN3TzVSYjhLczh4TmVaZHFQR0wKeHJwV1BrVUNnWUVBemVUME4vZzZ2d0djQ2VyRW5MSHB6R3FYN0s5dHpaSTVGWnI3R0l5eFRCVzRHdmdMd2p4UApSaVZ0SzdLVlcrT0ZNbmM5dTliS3FPOXdqK2JSVTVIcW1kZjZJRFhzRmVhZkRuTnhyRThFcjZLNWo5ZHN2QisrCi9oTFdmYVhGZ05SVG01WTkwNzV0YXR5dHE5bmkzVlpBUDduTklBbmlSQlNIRFdGM2JBbVR0OGNDZ1lFQThQMHcKVFlad05DUS9Xd3F4c3RlN2NuS1d3cVZrOUJjYW83UmROb2tDNXRvTGtud2kwNlR6S05KR1ZzazB2WWZQbWlqWAppT0RIUUZyT1F2NHY1M0x2Q2l3VG5zWU9GSmxUblpvWDgxcGxsSmpxc2h5aVlMMFVzNmc4VUtoNUdyaUZFUWNKCjZQeEsrV3M4eGtmZ1lVSVdXNzBUdEpRVnFGVnVKcStna1FuZFd2TUNnWUE3dmRzL0FqL0pmR1lTV3BTQ0F2MmIKMnJJS2N6eWhFWFNPMkZGVFpqOXJuRUczVVpIWDRqZitXbzI2eUM2ZVl2NGJEbzVUR3BmalBOYWthbzBDZXF4Zgp4MU5FVldFVFdiOTlLZklwMVNPKzhyQjFGRVR3c1NWeUEzVkpML2lHMFJVUmFCNjRlZUMxeVNKN1l0VjQ4N1hnCng4REZNeGo4T0JpWHdWZ3RlUG5yc1FLQmdGVEpuLzhHdDkrQWlWSHMxMHlISG9wTHlzTTlFZUhYWnlZRnhXMzAKa3JMS01Kd2ZWTm1HQlk5dFBCWTR3SGVXbXZJd1FIVUdNTlJ4bm5Sdm5rY2Vadi83TmdQOHh1TjBkcmpTaUc2MApkVnpzMkZaR1FOTXNjMllxWU40NENEUGdpK0RMeXk3UDVVa1A4OWdIWGVpYUtlZXBCSS9hTWl5QnNqbW1QU1lLCmhIa0ZBb0dBTk9WZGJxMVY2WjVTTUJ4Z0w3Y05OQk1XcHpOSWNCTHBjV0s5NUFpZ3JXcUIrSDZZNHdRRjBrcGsKNjY5cTFaSlkxZHJPVXhiNDh5aEovNUFlWnJyaVIvLzdoRTliNkgraUVnOUJFeUt1UnBPMFVQNG9USFAxMTBUWApvOXNKTWlLNENjc1I2a3h6Smg0RktPZHgxVUhmMjVrMjcxbnc1NDRmZ3JBMTJWRXBLLzA9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
MANIFEST:
---
# Source: cloudcore/templates/rbac_cloudcore.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
  name: cloudcore
---
# Source: cloudcore/templates/rbac_cloudcore.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cloudcore
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
rules:
- apiGroups: [""]
  resources: ["nodes", "nodes/status", "serviceaccounts/token", "configmaps", "pods", "pods/status", "secrets", "endpoints", "services", "persistentvolumes", "persistentvolumeclaims"]
  verbs: ["get", "list", "watch", "create", "update"]
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["get", "create", "list", "watch"]
- apiGroups: [""]
  resources: ["nodes", "nodes/status", "pods/status"]
  verbs: ["patch"]
- apiGroups: [""]
  resources: ["pods", "configmaps"]
  verbs: ["delete"]
- apiGroups: ["coordination.k8s.io"]
  resources: ["leases"]
  verbs: ["get", "list", "watch", "create", "update"]
- apiGroups: ["devices.kubeedge.io"]
  resources: ["devices", "devicemodels", "devices/status", "devicemodels/status"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["reliablesyncs.kubeedge.io"]
  resources: ["objectsyncs", "clusterobjectsyncs", "objectsyncs/status", "clusterobjectsyncs/status"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["rules.kubeedge.io"]
  resources: ["rules", "ruleendpoints", "rules/status", "ruleendpoints/status"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["apiextensions.k8s.io"]
  resources: ["customresourcedefinitions"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["networking.istio.io"]
  resources: ["*"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["operations.kubeedge.io"]
  resources: ["nodeupgradejobs", "nodeupgradejobs/status", "imageprepulljobs", "imageprepulljobs/status"]
  verbs: ["get", "list", "watch", "update", "patch"]
---
# Source: cloudcore/templates/rbac_cloudcore.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cloudcore
  labels:
    k8s-app: kubeedge
    kubeedge: cloudcore
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cloudcore
subjects:
- kind: ServiceAccount
  name: cloudcore
  namespace: kubeedge
---
# Source: cloudcore/templates/daemonset_mosquitto.yaml
kind: DaemonSet
apiVersion: apps/v1
metadata:
  name: edge-eclipse-mosquitto
  labels:
    k8s-app: eclipse-mosquitto
    kubeedge: eclipse-mosquitto
spec:
  selector:
    matchLabels:
      k8s-app: eclipse-mosquitto
      kubeedge: eclipse-mosquitto
  template:
    metadata:
      labels:
        k8s-app: eclipse-mosquitto
        kubeedge: eclipse-mosquitto
    spec:
      hostNetwork: true
      restartPolicy: Always
      volumes:
        - name: mqtt-data-path
          hostPath:
            path: /var/lib/kubeedge/mqtt/data
      containers:
        - name: edge-eclipse-mosquitto
          image: eclipse-mosquitto:1.6.15
          imagePullPolicy: IfNotPresent
          resources: 
          limits:
            cpu: 200m
            memory: 100Mi
          requests:
            cpu: 100m
            memory: 50Mi
          volumeMounts:
            - name: mqtt-data-path
              mountPath: /mosquitto/data
      affinity: 
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: node-role.kubernetes.io/edge
                operator: Exists
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: edgeapplications.apps.kubeedge.io
spec:
  group: apps.kubeedge.io
  names:
    kind: EdgeApplication
    listKind: EdgeApplicationList
    plural: edgeapplications
    shortNames:
    - eapp
    singular: edgeapplication
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: EdgeApplication is the Schema for the edgeapplications API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec represents the desired behavior of EdgeApplication.
            properties:
              workloadScope:
                description: WorkloadScope represents which node groups the workload
                  will be deployed in.
                properties:
                  targetNodeGroups:
                    description: TargetNodeGroups represents the target node groups
                      of workload to be deployed.
                    items:
                      description: TargetNodeGroup represents the target node group
                        of workload to be deployed, including override rules to apply
                        for this node group.
                      properties:
                        name:
                          description: Name represents the name of target node group
                          type: string
                        overriders:
                          description: Overriders represents the override rules that
                            would apply on workload.
                          properties:
                            imageOverriders:
                              description: ImageOverriders represents the rules dedicated
                                to handling image overrides.
                              items:
                                description: ImageOverrider represents the rules dedicated
                                  to handling image overrides.
                                properties:
                                  component:
                                    description: 'Component is part of image name.
                                      Basically we presume an image can be made of
                                      ''[registry/]repository[:tag]''. The registry
                                      could be: - k8s.gcr.io - fictional.registry.example:10443
                                      The repository could be: - kube-apiserver -
                                      fictional/nginx The tag cloud be: - latest -
                                      v1.19.1 - @sha256:dbcc1c35ac38df41fd2f5e4130b32ffdb93ebae8b3dbe638c23575912276fc9c'
                                    enum:
                                    - Registry
                                    - Repository
                                    - Tag
                                    type: string
                                  operator:
                                    description: Operator represents the operator
                                      which will apply on the image.
                                    enum:
                                    - add
                                    - remove
                                    - replace
                                    type: string
                                  predicate:
                                    description: "Predicate filters images before
                                      applying the rule. \n Defaults to nil, in that
                                      case, the system will automatically detect image
                                      fields if the resource type is Pod, ReplicaSet,
                                      Deployment or StatefulSet by following rule:
                                      \  - Pod: /spec/containers/<N>/image   - ReplicaSet:
                                      /spec/template/spec/containers/<N>/image   -
                                      Deployment: /spec/template/spec/containers/<N>/image
                                      \  - StatefulSet: /spec/template/spec/containers/<N>/image
                                      In addition, all images will be processed if
                                      the resource object has more than one containers.
                                      \n If not nil, only images matches the filters
                                      will be processed."
                                    properties:
                                      path:
                                        description: Path indicates the path of target
                                          field
                                        type: string
                                    required:
                                    - path
                                    type: object
                                  value:
                                    description: Value to be applied to image. Must
                                      not be empty when operator is 'add' or 'replace'.
                                      Defaults to empty and ignored when operator
                                      is 'remove'.
                                    type: string
                                required:
                                - component
                                - operator
                                type: object
                              type: array
                            replicas:
                              description: Replicas will override the replicas field
                                of deployment
                              type: integer
                          type: object
                      required:
                      - name
                      type: object
                    type: array
                type: object
              workloadTemplate:
                description: WorkloadTemplate contains original templates of resources
                  to be deployed as an EdgeApplication.
                properties:
                  manifests:
                    description: Manifests represent a list of Kubernetes resources
                      to be deployed on the managed node groups.
                    items:
                      description: Manifest represents a resource to be deployed on
                        managed node groups.
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    type: array
                type: object
            required:
            - workloadScope
            type: object
          status:
            description: Status represents the status of PropagationStatus.
            properties:
              workloadStatus:
                description: WorkloadStatus contains running statuses of generated
                  resources.
                items:
                  description: ManifestStatus contains running status of a specific
                    manifest in spec.
                  properties:
                    conditions:
                      description: 'Conditions contain the different condition statuses
                        for this manifest. Valid condition types are: 1. Processing:
                        this workload is under processing and the current state of
                        manifest does not match the desired. 2. Available: the current
                        status of this workload matches the desired.'
                      enum:
                      - Processing
                      - Available
                      type: string
                    identifier:
                      description: Identifier represents the identity of a resource
                        linking to manifests in spec.
                      properties:
                        group:
                          description: Group is the group of the resource.
                          type: string
                        kind:
                          description: Kind is the kind of the resource.
                          type: string
                        name:
                          description: Name is the name of the resource
                          type: string
                        namespace:
                          description: Namespace is the namespace of the resource
                          type: string
                        ordinal:
                          description: Ordinal represents an index in manifests list,
                            so the condition can still be linked to a manifest even
                            though manifest cannot be parsed successfully.
                          minimum: 0
                          type: integer
                        resource:
                          description: Resource is the resource type of the resource
                          type: string
                        version:
                          description: Version is the version of the resource.
                          type: string
                      required:
                      - ordinal
                      type: object
                  required:
                  - identifier
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: nodegroups.apps.kubeedge.io
spec:
  group: apps.kubeedge.io
  names:
    kind: NodeGroup
    listKind: NodeGroupList
    plural: nodegroups
    shortNames:
    - ng
    singular: nodegroup
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: NodeGroup is the Schema for the nodegroups API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec represents the specification of the desired behavior
              of member nodegroup.
            properties:
              matchLabels:
                additionalProperties:
                  type: string
                description: MatchLabels are used to select nodes that have these
                  labels.
                type: object
              nodes:
                description: Nodes contains names of all the nodes in the nodegroup.
                items:
                  type: string
                type: array
            type: object
          status:
            description: Status represents the status of member nodegroup.
            properties:
              nodeStatuses:
                description: NodeStatuses is a status list of all selected nodes.
                items:
                  description: NodeStatus contains status of node that selected by
                    this NodeGroup.
                  properties:
                    nodeName:
                      description: NodeName contains name of this node.
                      type: string
                    readyStatus:
                      description: ReadyStatus contains ready status of this node.
                      type: string
                    selectionStatus:
                      description: SelectionStatus contains status of the selection
                        result for this node.
                      type: string
                    selectionStatusReason:
                      description: SelectionStatusReason contains human-readable reason
                        for this SelectionStatus.
                      type: string
                  required:
                  - nodeName
                  - readyStatus
                  - selectionStatus
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: clusterobjectsyncs.reliablesyncs.kubeedge.io
spec:
  group: reliablesyncs.kubeedge.io
  names:
    kind: ClusterObjectSync
    listKind: ClusterObjectSyncList
    plural: clusterobjectsyncs
    singular: clusterobjectsync
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ClusterObjectSync stores the state of the cluster level, nonNamespaced
          object that was successfully persisted to the edge node. ClusterObjectSync
          name is a concatenation of the node name which receiving the object and
          the object UUID.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ObjectSyncSpec stores the details of objects that persist
              to the edge.
            properties:
              objectAPIVersion:
                description: ObjectAPIVersion is the APIVersion of the object that
                  was successfully persist to the edge node.
                type: string
              objectKind:
                description: ObjectType is the kind of the object that was successfully
                  persist to the edge node.
                type: string
              objectName:
                description: ObjectName is the name of the object that was successfully
                  persist to the edge node.
                type: string
            type: object
          status:
            description: ObjectSyncStatus stores the resourceversion of objects that
              persist to the edge.
            properties:
              objectResourceVersion:
                description: ObjectResourceVersion is the resourceversion of the object
                  that was successfully persist to the edge node.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: devices.devices.kubeedge.io
spec:
  group: devices.kubeedge.io
  names:
    kind: Device
    listKind: DeviceList
    plural: devices
    singular: device
  scope: Namespaced
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: Device is the Schema for the devices API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DeviceSpec represents a single device instance. It is an
              instantation of a device model.
            properties:
              data:
                description: Data section describe a list of time-series properties
                  which should be processed on edge node.
                properties:
                  dataProperties:
                    description: 'Required: A list of data properties, which are not
                      required to be processed by edgecore'
                    items:
                      description: DataProperty represents the device property for
                        external use.
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        propertyName:
                          description: 'Required: The property name for which should
                            be processed by external apps. This property should be
                            present in the device model.'
                          type: string
                      type: object
                    type: array
                  dataTopic:
                    description: Topic used by mapper, all data collected from dataProperties
                      should be published to this topic, the default value is $ke/events/device/+/data/update
                    type: string
                type: object
              deviceModelRef:
                description: 'Required: DeviceModelRef is reference to the device
                  model used as a template to create the device instance.'
                properties:
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      TODO: Add other useful fields. apiVersion, kind, uid?'
                    type: string
                type: object
              nodeSelector:
                description: NodeSelector indicates the binding preferences between
                  devices and nodes. Refer to k8s.io/kubernetes/pkg/apis/core NodeSelector
                  for more details
                properties:
                  nodeSelectorTerms:
                    description: Required. A list of node selector terms. The terms
                      are ORed.
                    items:
                      description: A null or empty node selector term matches no objects.
                        The requirements of them are ANDed. The TopologySelectorTerm
                        type implements a subset of the NodeSelectorTerm.
                      properties:
                        matchExpressions:
                          description: A list of node selector requirements by node's
                            labels.
                          items:
                            description: A node selector requirement is a selector
                              that contains values, a key, and an operator that relates
                              the key and values.
                            properties:
                              key:
                                description: The label key that the selector applies
                                  to.
                                type: string
                              operator:
                                description: Represents a key's relationship to a
                                  set of values. Valid operators are In, NotIn, Exists,
                                  DoesNotExist. Gt, and Lt.
                                type: string
                              values:
                                description: An array of string values. If the operator
                                  is In or NotIn, the values array must be non-empty.
                                  If the operator is Exists or DoesNotExist, the values
                                  array must be empty. If the operator is Gt or Lt,
                                  the values array must have a single element, which
                                  will be interpreted as an integer. This array is
                                  replaced during a strategic merge patch.
                                items:
                                  type: string
                                type: array
                            required:
                            - key
                            - operator
                            type: object
                          type: array
                        matchFields:
                          description: A list of node selector requirements by node's
                            fields.
                          items:
                            description: A node selector requirement is a selector
                              that contains values, a key, and an operator that relates
                              the key and values.
                            properties:
                              key:
                                description: The label key that the selector applies
                                  to.
                                type: string
                              operator:
                                description: Represents a key's relationship to a
                                  set of values. Valid operators are In, NotIn, Exists,
                                  DoesNotExist. Gt, and Lt.
                                type: string
                              values:
                                description: An array of string values. If the operator
                                  is In or NotIn, the values array must be non-empty.
                                  If the operator is Exists or DoesNotExist, the values
                                  array must be empty. If the operator is Gt or Lt,
                                  the values array must have a single element, which
                                  will be interpreted as an integer. This array is
                                  replaced during a strategic merge patch.
                                items:
                                  type: string
                                type: array
                            required:
                            - key
                            - operator
                            type: object
                          type: array
                      type: object
                    type: array
                required:
                - nodeSelectorTerms
                type: object
              propertyVisitors:
                description: List of property visitors which describe how to access
                  the device properties. PropertyVisitors must unique by propertyVisitor.propertyName.
                items:
                  description: DevicePropertyVisitor describes the specifics of accessing
                    a particular device property. Visitors are intended to be consumed
                    by device mappers which connect to devices and collect data /
                    perform actions on the device.
                  properties:
                    bluetooth:
                      description: Bluetooth represents a set of additional visitor
                        config fields of bluetooth protocol.
                      properties:
                        characteristicUUID:
                          description: 'Required: Unique ID of the corresponding operation'
                          type: string
                        dataConverter:
                          description: Responsible for converting the data being read
                            from the bluetooth device into a form that is understandable
                            by the platform
                          properties:
                            endIndex:
                              description: 'Required: Specifies the end index of incoming
                                byte stream to be considered to convert the data the
                                value specified should be inclusive for example if
                                3 is specified it includes the third index'
                              type: integer
                            orderOfOperations:
                              description: Specifies in what order the operations(which
                                are required to be performed to convert incoming data
                                into understandable form) are performed
                              items:
                                description: Specify the operation that should be
                                  performed to convert incoming data into understandable
                                  form
                                properties:
                                  operationType:
                                    description: 'Required: Specifies the operation
                                      to be performed to convert incoming data'
                                    type: string
                                  operationValue:
                                    description: 'Required: Specifies with what value
                                      the operation is to be performed'
                                    type: number
                                type: object
                              type: array
                            shiftLeft:
                              description: Refers to the number of bits to shift left,
                                if left-shift operation is necessary for conversion
                              type: integer
                            shiftRight:
                              description: Refers to the number of bits to shift right,
                                if right-shift operation is necessary for conversion
                              type: integer
                            startIndex:
                              description: 'Required: Specifies the start index of
                                the incoming byte stream to be considered to convert
                                the data. For example: start-index:2, end-index:3
                                concatenates the value present at second and third
                                index of the incoming byte stream. If we want to reverse
                                the order we can give it as start-index:3, end-index:2'
                              type: integer
                          type: object
                        dataWrite:
                          additionalProperties:
                            format: byte
                            type: string
                          description: 'Responsible for converting the data coming
                            from the platform into a form that is understood by the
                            bluetooth device For example: "ON":[1], "OFF":[0]'
                          type: object
                      type: object
                    collectCycle:
                      description: Define how frequent mapper will collect from device.
                      format: int64
                      type: integer
                    customizedProtocol:
                      description: CustomizedProtocol represents a set of visitor
                        config fields of bluetooth protocol.
                      properties:
                        configData:
                          description: 'Required: The configData of customized protocol'
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        protocolName:
                          description: 'Required: name of customized protocol'
                          type: string
                      type: object
                    customizedValues:
                      description: Customized values for visitor of provided protocols
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    modbus:
                      description: Modbus represents a set of additional visitor config
                        fields of modbus protocol.
                      properties:
                        isRegisterSwap:
                          description: Indicates whether the high and low register
                            swapped. Defaults to false.
                          type: boolean
                        isSwap:
                          description: Indicates whether the high and low byte swapped.
                            Defaults to false.
                          type: boolean
                        limit:
                          description: 'Required: Limit number of registers to read/write.'
                          format: int64
                          type: integer
                        offset:
                          description: 'Required: Offset indicates the starting register
                            number to read/write data.'
                          format: int64
                          type: integer
                        register:
                          description: 'Required: Type of register'
                          enum:
                          - CoilRegister
                          - DiscreteInputRegister
                          - InputRegister
                          - HoldingRegister
                          type: string
                        scale:
                          description: The scale to convert raw property data into
                            final units. Defaults to 1.0
                          type: number
                      type: object
                    opcua:
                      description: Opcua represents a set of additional visitor config
                        fields of opc-ua protocol.
                      properties:
                        browseName:
                          description: The name of opc-ua node
                          type: string
                        nodeID:
                          description: 'Required: The ID of opc-ua node, e.g. "ns=1,i=1005"'
                          type: string
                      type: object
                    propertyName:
                      description: 'Required: The device property name to be accessed.
                        This should refer to one of the device properties defined
                        in the device model.'
                      type: string
                    reportCycle:
                      description: Define how frequent mapper will report the value.
                      format: int64
                      type: integer
                  type: object
                type: array
              protocol:
                description: 'Required: The protocol configuration used to connect
                  to the device.'
                properties:
                  bluetooth:
                    description: Protocol configuration for bluetooth
                    properties:
                      macAddress:
                        description: Unique identifier assigned to the device.
                        type: string
                    type: object
                  common:
                    description: Configuration for protocol common part
                    properties:
                      collectRetryTimes:
                        description: Define retry times of mapper will collect from
                          device.
                        format: int64
                        type: integer
                      collectTimeout:
                        description: Define timeout of mapper collect from device.
                        format: int64
                        type: integer
                      collectType:
                        description: Define collect type, sync or async.
                        enum:
                        - sync
                        - async
                        type: string
                      com:
                        properties:
                          baudRate:
                            description: Required. BaudRate 115200|57600|38400|19200|9600|4800|2400|1800|1200|600|300|200|150|134|110|75|50
                            enum:
                            - 115200
                            - 57600
                            - 38400
                            - 19200
                            - 9600
                            - 4800
                            - 2400
                            - 1800
                            - 1200
                            - 600
                            - 300
                            - 200
                            - 150
                            - 134
                            - 110
                            - 75
                            - 50
                            format: int64
                            type: integer
                          dataBits:
                            description: Required. Valid values are 8, 7, 6, 5.
                            enum:
                            - 8
                            - 7
                            - 6
                            - 5
                            format: int64
                            type: integer
                          parity:
                            description: Required. Valid options are "none", "even",
                              "odd". Defaults to "none".
                            enum:
                            - none
                            - even
                            - odd
                            type: string
                          serialPort:
                            description: Required.
                            type: string
                          stopBits:
                            description: Required. Bit that stops 1|2
                            enum:
                            - 1
                            - 2
                            format: int64
                            type: integer
                        type: object
                      commType:
                        description: Communication type, like tcp client, tcp server
                          or COM
                        type: string
                      customizedValues:
                        description: Customized values for provided protocol
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      reconnRetryTimes:
                        description: Reconnecting retry times
                        format: int64
                        type: integer
                      reconnTimeout:
                        description: Reconnection timeout
                        format: int64
                        type: integer
                      tcp:
                        properties:
                          ip:
                            description: Required.
                            type: string
                          port:
                            description: Required.
                            format: int64
                            type: integer
                        type: object
                    type: object
                  customizedProtocol:
                    description: Configuration for customized protocol
                    properties:
                      configData:
                        description: Any config data
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      protocolName:
                        description: Unique protocol name Required.
                        type: string
                    type: object
                  modbus:
                    description: Protocol configuration for modbus
                    properties:
                      slaveID:
                        description: Required. 0-255
                        format: int64
                        type: integer
                    type: object
                  opcua:
                    description: Protocol configuration for opc-ua
                    properties:
                      certificate:
                        description: Certificate for access opc server.
                        type: string
                      password:
                        description: Password for access opc server.
                        type: string
                      privateKey:
                        description: PrivateKey for access opc server.
                        type: string
                      securityMode:
                        description: Defaults to "none".
                        type: string
                      securityPolicy:
                        description: Defaults to "none".
                        type: string
                      timeout:
                        description: Timeout seconds for the opc server connection.???
                        format: int64
                        type: integer
                      url:
                        description: 'Required: The URL for opc server endpoint.'
                        type: string
                      userName:
                        description: Username for access opc server.
                        type: string
                    type: object
                type: object
            type: object
          status:
            description: DeviceStatus reports the device state and the desired/reported
              values of twin attributes.
            properties:
              twins:
                description: 'A list of device twins containing desired/reported desired/reported
                  values of twin properties. Optional: A passive device won''t have
                  twin properties and this list could be empty.'
                items:
                  description: Twin provides a logical representation of control properties
                    (writable properties in the device model). The properties can
                    have a Desired state and a Reported state. The cloud configures
                    the `Desired`state of a device property and this configuration
                    update is pushed to the edge node. The mapper sends a command
                    to the device to change this property value as per the desired
                    state . It receives the `Reported` state of the property once
                    the previous operation is complete and sends the reported state
                    to the cloud. Offline device interaction in the edge is possible
                    via twin properties for control/command operations.
                  properties:
                    desired:
                      description: 'Required: the desired property value.'
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        value:
                          description: 'Required: The value for this property.'
                          type: string
                      required:
                      - value
                      type: object
                    propertyName:
                      description: 'Required: The property name for which the desired/reported
                        values are specified. This property should be present in the
                        device model.'
                      type: string
                    reported:
                      description: 'Required: the reported property value.'
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        value:
                          description: 'Required: The value for this property.'
                          type: string
                      required:
                      - value
                      type: object
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: false
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: Device is the Schema for the devices API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DeviceSpec represents a single device instance.
            properties:
              deviceModelRef:
                description: 'Required: DeviceModelRef is reference to the device
                  model used as a template to create the device instance.'
                properties:
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      TODO: Add other useful fields. apiVersion, kind, uid?'
                    type: string
                type: object
              nodeName:
                description: NodeName is a request to schedule this device onto a
                  specific node. If it is non-empty, the scheduler simply schedules
                  this device onto that node, assuming that it fits resource requirements.
                type: string
              properties:
                description: List of properties which describe the device properties.
                  properties list item must be unique by properties.Name.
                items:
                  description: DeviceProperty describes the specifics all the properties
                    of the device.
                  properties:
                    collectCycle:
                      description: Define how frequent mapper will collect from device.
                      format: int64
                      type: integer
                    desired:
                      description: The desired property value.
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        value:
                          description: 'Required: The value for this property.'
                          type: string
                      required:
                      - value
                      type: object
                    name:
                      description: 'Required: The device property name to be accessed.
                        It must be unique.'
                      type: string
                    pushMethod:
                      description: PushMethod represents the protocol used to push
                        data, please ensure that the mapper can access the destination
                        address.
                      properties:
                        dbMethod:
                          description: DBMethod represents the method used to push
                            data to database, please ensure that the mapper can access
                            the destination address.
                          properties:
                            influxdb2:
                              description: method configuration for database
                              properties:
                                influxdb2ClientConfig:
                                  description: Config of influx database
                                  properties:
                                    bucket:
                                      description: Bucket of the user in influx database
                                      type: string
                                    org:
                                      description: Org of the user in influx database
                                      type: string
                                    url:
                                      description: Url of influx database
                                      type: string
                                  type: object
                                influxdb2DataConfig:
                                  description: config of device data when push to
                                    influx database
                                  properties:
                                    fieldKey:
                                      description: FieldKey of the user data
                                      type: string
                                    measurement:
                                      description: Measurement of the user data
                                      type: string
                                    tag:
                                      additionalProperties:
                                        type: string
                                      description: the tag of device data
                                      type: object
                                  type: object
                              type: object
                          type: object
                        http:
                          description: HTTP Push method configuration for http
                          properties:
                            hostName:
                              type: string
                            port:
                              format: int64
                              type: integer
                            requestPath:
                              type: string
                            timeout:
                              format: int64
                              type: integer
                          type: object
                        mqtt:
                          description: MQTT Push method configuration for mqtt
                          properties:
                            address:
                              description: broker address, like mqtt://127.0.0.1:1883
                              type: string
                            qos:
                              description: qos of mqtt publish param
                              format: int32
                              type: integer
                            retained:
                              description: Is the message retained
                              type: boolean
                            topic:
                              description: publish topic for mqtt
                              type: string
                          type: object
                      type: object
                    reportCycle:
                      description: Define how frequent mapper will report the value.
                      format: int64
                      type: integer
                    reportToCloud:
                      description: whether be reported to the cloud
                      type: boolean
                    visitors:
                      description: 'Visitors are intended to be consumed by device
                        mappers which connect to devices and collect data / perform
                        actions on the device. Required: Protocol relevant config
                        details about the how to access the device property.'
                      properties:
                        configData:
                          description: 'Required: The configData of customized protocol'
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        protocolName:
                          description: 'Required: name of customized protocol'
                          type: string
                      type: object
                  type: object
                type: array
              protocol:
                description: 'Required: The protocol configuration used to connect
                  to the device.'
                properties:
                  configData:
                    description: Any config data
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  protocolName:
                    description: Unique protocol name Required.
                    type: string
                type: object
            type: object
          status:
            description: DeviceStatus reports the device state and the desired/reported
              values of twin attributes.
            properties:
              twins:
                description: 'A list of device twins containing desired/reported desired/reported
                  values of twin properties. Optional: A passive device won''t have
                  twin properties and this list could be empty.'
                items:
                  description: Twin provides a logical representation of control properties
                    (writable properties in the device model). The properties can
                    have a Desired state and a Reported state. The cloud configures
                    the `Desired`state of a device property and this configuration
                    update is pushed to the edge node. The mapper sends a command
                    to the device to change this property value as per the desired
                    state . It receives the `Reported` state of the property once
                    the previous operation is complete and sends the reported state
                    to the cloud. Offline device interaction in the edge is possible
                    via twin properties for control/command operations.
                  properties:
                    observedDesired:
                      description: The meaning of here is to indicate desired value
                        of `deviceProperty.Desired` that the mapper has received in
                        current cycle. Useful in cases that people want to check whether
                        the mapper is working appropriately and its internal status
                        is up-to-date. This value should be only updated by devicecontroller
                        upstream.
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        value:
                          description: 'Required: The value for this property.'
                          type: string
                      required:
                      - value
                      type: object
                    propertyName:
                      description: 'Required: The property name for which the desired/reported
                        values are specified. This property should be present in the
                        device model.'
                      type: string
                    reported:
                      description: 'Required: the reported property value.'
                      properties:
                        metadata:
                          additionalProperties:
                            type: string
                          description: Additional metadata like timestamp when the
                            value was reported etc.
                          type: object
                        value:
                          description: 'Required: The value for this property.'
                          type: string
                      required:
                      - value
                      type: object
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: devicemodels.devices.kubeedge.io
spec:
  group: devices.kubeedge.io
  names:
    kind: DeviceModel
    listKind: DeviceModelList
    plural: devicemodels
    singular: devicemodel
  scope: Namespaced
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: DeviceModel is the Schema for the device model API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DeviceModelSpec defines the model / template for a device.It
              is a blueprint which describes the device capabilities and access mechanism
              via property visitors.
            properties:
              properties:
                description: 'Required: List of device properties.'
                items:
                  description: DeviceProperty describes an individual device property
                    / attribute like temperature / humidity etc.
                  properties:
                    description:
                      description: The device property description.
                      type: string
                    name:
                      description: 'Required: The device property name.'
                      type: string
                    type:
                      description: 'Required: PropertyType represents the type and
                        data validation of the property.'
                      properties:
                        boolean:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                            defaultValue:
                              type: boolean
                          type: object
                        bytes:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                          type: object
                        double:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                            defaultValue:
                              type: number
                            maximum:
                              type: number
                            minimum:
                              type: number
                            unit:
                              description: The unit of the property
                              type: string
                          type: object
                        float:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                            defaultValue:
                              type: number
                            maximum:
                              type: number
                            minimum:
                              type: number
                            unit:
                              description: The unit of the property
                              type: string
                          type: object
                        int:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                            defaultValue:
                              format: int64
                              type: integer
                            maximum:
                              format: int64
                              type: integer
                            minimum:
                              format: int64
                              type: integer
                            unit:
                              description: The unit of the property
                              type: string
                          type: object
                        string:
                          properties:
                            accessMode:
                              description: 'Required: Access mode of property, ReadWrite
                                or ReadOnly.'
                              enum:
                              - ReadWrite
                              - ReadOnly
                              type: string
                            defaultValue:
                              type: string
                          type: object
                      type: object
                  type: object
                type: array
              protocol:
                description: 'Required for DMI: Protocol name used by the device.'
                type: string
            type: object
        type: object
    served: true
    storage: false
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: DeviceModel is the Schema for the device model API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DeviceModelSpec defines the model for a device.It is a blueprint
              which describes the device capabilities and access mechanism via property
              visitors.
            properties:
              properties:
                description: 'Required: List of device properties.'
                items:
                  description: ModelProperty describes an individual device property
                    / attribute like temperature / humidity etc.
                  properties:
                    accessMode:
                      description: 'Required: Access mode of property, ReadWrite or
                        ReadOnly.'
                      enum:
                      - ReadWrite
                      - ReadOnly
                      type: string
                    description:
                      description: The device property description.
                      type: string
                    maximum:
                      type: string
                    minimum:
                      type: string
                    name:
                      description: 'Required: The device property name.'
                      type: string
                    type:
                      description: 'Required: Type of device property, ENUM: INT,FLOAT,DOUBLE,STRING,BOOLEAN,BYTES'
                      enum:
                      - INT
                      - FLOAT
                      - DOUBLE
                      - STRING
                      - BOOLEAN
                      - BYTES
                      type: string
                    unit:
                      description: The unit of the property
                      type: string
                  type: object
                type: array
              protocol:
                description: 'Required: Protocol name used by the device.'
                type: string
            type: object
        type: object
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: objectsyncs.reliablesyncs.kubeedge.io
spec:
  group: reliablesyncs.kubeedge.io
  names:
    kind: ObjectSync
    listKind: ObjectSyncList
    plural: objectsyncs
    singular: objectsync
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ObjectSync stores the state of the namespaced object that was
          successfully persisted to the edge node. ObjectSync name is a concatenation
          of the node name which receiving the object and the object UUID.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ObjectSyncSpec stores the details of objects that persist
              to the edge.
            properties:
              objectAPIVersion:
                description: ObjectAPIVersion is the APIVersion of the object that
                  was successfully persist to the edge node.
                type: string
              objectKind:
                description: ObjectType is the kind of the object that was successfully
                  persist to the edge node.
                type: string
              objectName:
                description: ObjectName is the name of the object that was successfully
                  persist to the edge node.
                type: string
            type: object
          status:
            description: ObjectSyncStatus stores the resourceversion of objects that
              persist to the edge.
            properties:
              objectResourceVersion:
                description: ObjectResourceVersion is the resourceversion of the object
                  that was successfully persist to the edge node.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: nodeupgradejobs.operations.kubeedge.io
spec:
  group: operations.kubeedge.io
  names:
    kind: NodeUpgradeJob
    listKind: NodeUpgradeJobList
    plural: nodeupgradejobs
    singular: nodeupgradejob
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: NodeUpgradeJob is used to upgrade edge node from cloud side.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Specification of the desired behavior of NodeUpgradeJob.
            properties:
              concurrency:
                description: Concurrency specifies the max number of edge nodes that
                  can be upgraded at the same time. The default Concurrency value
                  is 1.
                format: int32
                type: integer
              image:
                description: 'Image specifies a container image name, the image contains:
                  keadm and edgecore. keadm is used as upgradetool, to install the
                  new version of edgecore. The image name consists of registry hostname
                  and repository name, if it includes the tag or digest, the tag or
                  digest will be overwritten by Version field above. If the registry
                  hostname is empty, docker.io will be used as default. The default
                  image name is: kubeedge/installation-package.'
                type: string
              labelSelector:
                description: LabelSelector is a filter to select member clusters by
                  labels. It must match a node's labels for the NodeUpgradeJob to
                  be operated on that node. Please note that sets of NodeNames and
                  LabelSelector are ORed. Users must set one and can only set one.
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
              nodeNames:
                description: NodeNames is a request to select some specific nodes.
                  If it is non-empty, the upgrade job simply select these edge nodes
                  to do upgrade operation. Please note that sets of NodeNames and
                  LabelSelector are ORed. Users must set one and can only set one.
                items:
                  type: string
                type: array
              timeoutSeconds:
                description: TimeoutSeconds limits the duration of the node upgrade
                  job. Default to 300. If set to 0, we'll use the default value 300.
                format: int32
                type: integer
              upgradeTool:
                description: UpgradeTool is a request to decide use which upgrade
                  tool. If it is empty, the upgrade job simply use default upgrade
                  tool keadm to do upgrade operation.
                type: string
              version:
                type: string
            type: object
          status:
            description: Most recently observed status of the NodeUpgradeJob.
            properties:
              state:
                description: 'State represents for the state phase of the NodeUpgradeJob.
                  There are three possible state values: "", upgrading and completed.'
                enum:
                - upgrading
                - completed
                type: string
              status:
                description: Status contains upgrade Status for each edge node.
                items:
                  description: UpgradeStatus stores the status of Upgrade for each
                    edge node.
                  properties:
                    history:
                      description: History is the last upgrade result of the edge
                        node.
                      properties:
                        fromVersion:
                          description: FromVersion is the version which the edge node
                            is upgraded from.
                          type: string
                        historyID:
                          description: HistoryID is to uniquely identify an Upgrade
                            Operation.
                          type: string
                        reason:
                          description: Reason is the error reason of Upgrade failure.
                            If the upgrade is successful, this reason is an empty
                            string.
                          type: string
                        result:
                          description: Result represents the result of upgrade.
                          enum:
                          - upgrade_success
                          - upgrade_failed_rollback_success
                          - upgrade_failed_rollback_failed
                          type: string
                        toVersion:
                          description: ToVersion is the version which the edge node
                            is upgraded to.
                          type: string
                        upgradeTime:
                          description: UpgradeTime is the time of this Upgrade.
                          type: string
                      type: object
                    nodeName:
                      description: NodeName is the name of edge node.
                      type: string
                    state:
                      description: 'State represents for the upgrade state phase of
                        the edge node. There are three possible state values: "",
                        upgrading and completed.'
                      enum:
                      - upgrading
                      - completed
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.6.2
  creationTimestamp: null
  name: serviceaccountaccesses.policy.kubeedge.io
spec:
  group: policy.kubeedge.io
  names:
    kind: ServiceAccountAccess
    listKind: ServiceAccountAccessList
    plural: serviceaccountaccesses
    shortNames:
    - saaccess
    singular: serviceaccountaccess
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceAccountAccess is the Schema for the ServiceAccountAccess
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec represents the specification of rbac.
            properties:
              accessClusterRoleBinding:
                description: AccessClusterRoleBinding represents rbac ClusterRoleBinding
                  plus detailed ClusterRole info.
                items:
                  description: AccessClusterRoleBinding represents rbac ClusterRoleBinding
                    plus detailed ClusterRole info.
                  properties:
                    clusterRoleBinding:
                      description: ClusterRoleBinding represents rbac ClusterRoleBinding.
                      properties:
                        apiVersion:
                          description: 'APIVersion defines the versioned schema of
                            this representation of an object. Servers should convert
                            recognized schemas to the latest internal value, and may
                            reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                          type: string
                        kind:
                          description: 'Kind is a string value representing the REST
                            resource this object represents. Servers may infer this
                            from the endpoint the client submits requests to. Cannot
                            be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                          type: string
                        metadata:
                          description: Standard object's metadata.
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            finalizers:
                              items:
                                type: string
                              type: array
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                            name:
                              type: string
                            namespace:
                              type: string
                          type: object
                        roleRef:
                          description: RoleRef can only reference a ClusterRole in
                            the global namespace. If the RoleRef cannot be resolved,
                            the Authorizer must return an error.
                          properties:
                            apiGroup:
                              description: APIGroup is the group for the resource
                                being referenced
                              type: string
                            kind:
                              description: Kind is the type of resource being referenced
                              type: string
                            name:
                              description: Name is the name of resource being referenced
                              type: string
                          required:
                          - apiGroup
                          - kind
                          - name
                          type: object
                        subjects:
                          description: Subjects holds references to the objects the
                            role applies to.
                          items:
                            description: Subject contains a reference to the object
                              or user identities a role binding applies to.  This
                              can either hold a direct API object reference, or a
                              value for non-objects such as user and group names.
                            properties:
                              apiGroup:
                                description: APIGroup holds the API group of the referenced
                                  subject. Defaults to "" for ServiceAccount subjects.
                                  Defaults to "rbac.authorization.k8s.io" for User
                                  and Group subjects.
                                type: string
                              kind:
                                description: Kind of object being referenced. Values
                                  defined by this API group are "User", "Group", and
                                  "ServiceAccount". If the Authorizer does not recognized
                                  the kind value, the Authorizer should report an
                                  error.
                                type: string
                              name:
                                description: Name of the object being referenced.
                                type: string
                              namespace:
                                description: Namespace of the referenced object.  If
                                  the object kind is non-namespace, such as "User"
                                  or "Group", and this value is not empty the Authorizer
                                  should report an error.
                                type: string
                            required:
                            - kind
                            - name
                            type: object
                          type: array
                      required:
                      - roleRef
                      type: object
                    rules:
                      description: Rules contains role rules.
                      items:
                        description: PolicyRule holds information that describes a
                          policy rule, but does not contain information about who
                          the rule applies to or which namespace the rule applies
                          to.
                        properties:
                          apiGroups:
                            description: APIGroups is the name of the APIGroup that
                              contains the resources.  If multiple API groups are
                              specified, any action requested against one of the enumerated
                              resources in any API group will be allowed. "" represents
                              the core API group and "*" represents all API groups.
                            items:
                              type: string
                            type: array
                          nonResourceURLs:
                            description: NonResourceURLs is a set of partial urls
                              that a user should have access to.  *s are allowed,
                              but only as the full, final step in the path Since non-resource
                              URLs are not namespaced, this field is only applicable
                              for ClusterRoles referenced from a ClusterRoleBinding.
                              Rules can either apply to API resources (such as "pods"
                              or "secrets") or non-resource URL paths (such as "/api"),  but
                              not both.
                            items:
                              type: string
                            type: array
                          resourceNames:
                            description: ResourceNames is an optional white list of
                              names that the rule applies to.  An empty set means
                              that everything is allowed.
                            items:
                              type: string
                            type: array
                          resources:
                            description: Resources is a list of resources this rule
                              applies to. '*' represents all resources.
                            items:
                              type: string
                            type: array
                          verbs:
                            description: Verbs is a list of Verbs that apply to ALL
                              the ResourceKinds contained in this rule. '*' represents
                              all verbs.
                            items:
                              type: string
                            type: array
                        required:
                        - verbs
                        type: object
                      type: array
                  type: object
                type: array
              accessRoleBinding:
                description: AccessRoleBinding represents rbac rolebinding plus detailed
                  role info.
                items:
                  description: AccessRoleBinding represents rbac rolebinding plus
                    detailed role info.
                  properties:
                    roleBinding:
                      description: RoleBinding represents rbac rolebinding.
                      properties:
                        apiVersion:
                          description: 'APIVersion defines the versioned schema of
                            this representation of an object. Servers should convert
                            recognized schemas to the latest internal value, and may
                            reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                          type: string
                        kind:
                          description: 'Kind is a string value representing the REST
                            resource this object represents. Servers may infer this
                            from the endpoint the client submits requests to. Cannot
                            be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                          type: string
                        metadata:
                          description: Standard object's metadata.
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            finalizers:
                              items:
                                type: string
                              type: array
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                            name:
                              type: string
                            namespace:
                              type: string
                          type: object
                        roleRef:
                          description: RoleRef can reference a Role in the current
                            namespace or a ClusterRole in the global namespace. If
                            the RoleRef cannot be resolved, the Authorizer must return
                            an error.
                          properties:
                            apiGroup:
                              description: APIGroup is the group for the resource
                                being referenced
                              type: string
                            kind:
                              description: Kind is the type of resource being referenced
                              type: string
                            name:
                              description: Name is the name of resource being referenced
                              type: string
                          required:
                          - apiGroup
                          - kind
                          - name
                          type: object
                        subjects:
                          description: Subjects holds references to the objects the
                            role applies to.
                          items:
                            description: Subject contains a reference to the object
                              or user identities a role binding applies to.  This
                              can either hold a direct API object reference, or a
                              value for non-objects such as user and group names.
                            properties:
                              apiGroup:
                                description: APIGroup holds the API group of the referenced
                                  subject. Defaults to "" for ServiceAccount subjects.
                                  Defaults to "rbac.authorization.k8s.io" for User
                                  and Group subjects.
                                type: string
                              kind:
                                description: Kind of object being referenced. Values
                                  defined by this API group are "User", "Group", and
                                  "ServiceAccount". If the Authorizer does not recognized
                                  the kind value, the Authorizer should report an
                                  error.
                                type: string
                              name:
                                description: Name of the object being referenced.
                                type: string
                              namespace:
                                description: Namespace of the referenced object.  If
                                  the object kind is non-namespace, such as "User"
                                  or "Group", and this value is not empty the Authorizer
                                  should report an error.
                                type: string
                            required:
                            - kind
                            - name
                            type: object
                          type: array
                      required:
                      - roleRef
                      type: object
                    rules:
                      description: Rules contains role rules.
                      items:
                        description: PolicyRule holds information that describes a
                          policy rule, but does not contain information about who
                          the rule applies to or which namespace the rule applies
                          to.
                        properties:
                          apiGroups:
                            description: APIGroups is the name of the APIGroup that
                              contains the resources.  If multiple API groups are
                              specified, any action requested against one of the enumerated
                              resources in any API group will be allowed. "" represents
                              the core API group and "*" represents all API groups.
                            items:
                              type: string
                            type: array
                          nonResourceURLs:
                            description: NonResourceURLs is a set of partial urls
                              that a user should have access to.  *s are allowed,
                              but only as the full, final step in the path Since non-resource
                              URLs are not namespaced, this field is only applicable
                              for ClusterRoles referenced from a ClusterRoleBinding.
                              Rules can either apply to API resources (such as "pods"
                              or "secrets") or non-resource URL paths (such as "/api"),  but
                              not both.
                            items:
                              type: string
                            type: array
                          resourceNames:
                            description: ResourceNames is an optional white list of
                              names that the rule applies to.  An empty set means
                              that everything is allowed.
                            items:
                              type: string
                            type: array
                          resources:
                            description: Resources is a list of resources this rule
                              applies to. '*' represents all resources.
                            items:
                              type: string
                            type: array
                          verbs:
                            description: Verbs is a list of Verbs that apply to ALL
                              the ResourceKinds contained in this rule. '*' represents
                              all verbs.
                            items:
                              type: string
                            type: array
                        required:
                        - verbs
                        type: object
                      type: array
                  type: object
                type: array
              serviceAccount:
                description: ServiceAccount is one-to-one corresponding relations
                  with the serviceaccountaccess.
                properties:
                  apiVersion:
                    description: 'APIVersion defines the versioned schema of this
                      representation of an object. Servers should convert recognized
                      schemas to the latest internal value, and may reject unrecognized
                      values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                    type: string
                  automountServiceAccountToken:
                    description: AutomountServiceAccountToken indicates whether pods
                      running as this service account should have an API token automatically
                      mounted. Can be overridden at the pod level.
                    type: boolean
                  imagePullSecrets:
                    description: 'ImagePullSecrets is a list of references to secrets
                      in the same namespace to use for pulling any images in pods
                      that reference this ServiceAccount. ImagePullSecrets are distinct
                      from Secrets because Secrets can be mounted in the pod, but
                      ImagePullSecrets are only accessed by the kubelet. More info:
                      https://kubernetes.io/docs/concepts/containers/images/#specifying-imagepullsecrets-on-a-pod'
                    items:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    type: array
                  kind:
                    description: 'Kind is a string value representing the REST resource
                      this object represents. Servers may infer this from the endpoint
                      the client submits requests to. Cannot be updated. In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  metadata:
                    description: 'Standard object''s metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata'
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      finalizers:
                        items:
                          type: string
                        type: array
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                      name:
                        type: string
                      namespace:
                        type: string
                    type: object
                  secrets:
                    description: 'Secrets is a list of the secrets in the same namespace
                      that pods running using this ServiceAccount are allowed to use.
                      Pods are only limited to this list if this service account has
                      a "kubernetes.io/enforce-mountable-secrets" annotation set to
                      "true". This field should not be used to find auto-generated
                      service account token secrets for use outside of pods. Instead,
                      tokens can be requested directly using the TokenRequest API,
                      or service account token secrets can be manually created. More
                      info: https://kubernetes.io/docs/concepts/configuration/secret'
                    items:
                      description: "ObjectReference contains enough information to
                        let you inspect or modify the referred object. --- New uses
                        of this type are discouraged because of difficulty describing
                        its usage when embedded in APIs.  1. Ignored fields.  It includes
                        many fields which are not generally honored.  For instance,
                        ResourceVersion and FieldPath are both very rarely valid in
                        actual usage.  2. Invalid usage help.  It is impossible to
                        add specific help for individual usage.  In most embedded
                        usages, there are particular     restrictions like, \"must
                        refer only to types A and B\" or \"UID not honored\" or \"name
                        must be restricted\".     Those cannot be well described when
                        embedded.  3. Inconsistent validation.  Because the usages
                        are different, the validation rules are different by usage,
                        which makes it hard for users to predict what will happen.
                        \ 4. The fields are both imprecise and overly precise.  Kind
                        is not a precise mapping to a URL. This can produce ambiguity
                        \    during interpretation and require a REST mapping.  In
                        most cases, the dependency is on the group,resource tuple
                        \    and the version of the actual struct is irrelevant.  5.
                        We cannot easily change it.  Because this type is embedded
                        in many locations, updates to this type     will affect numerous
                        schemas.  Don't make new APIs embed an underspecified API
                        type they do not control. \n Instead of using this type, create
                        a locally provided and used type that is well-focused on your
                        reference. For example, ServiceReferences for admission registration:
                        https://github.com/kubernetes/api/blob/release-1.17/admissionregistration/v1/types.go#L533
                        ."
                      properties:
                        apiVersion:
                          description: API version of the referent.
                          type: string
                        fieldPath:
                          description: 'If referring to a piece of an object instead
                            of an entire object, this string should contain a valid
                            JSON/Go field access statement, such as desiredState.manifest.containers[2].
                            For example, if the object reference is to a container
                            within a pod, this would take on a value like: "spec.containers{name}"
                            (where "name" refers to the name of the container that
                            triggered the event) or if no container name is specified
                            "spec.containers[2]" (container with index 2 in this pod).
                            This syntax is chosen only to have some well-defined way
                            of referencing a part of an object. TODO: this design
                            is not final and this field is subject to change in the
                            future.'
                          type: string
                        kind:
                          description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                          type: string
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                          type: string
                        namespace:
                          description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                          type: string
                        resourceVersion:
                          description: 'Specific resourceVersion to which this reference
                            is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                          type: string
                        uid:
                          description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                          type: string
                      type: object
                    type: array
                type: object
              serviceAccountUid:
                description: ServiceAccountUID is the uid of serviceaccount.
                type: string
            type: object
          status:
            description: Status represents the node list which store the rules.
            properties:
              nodeList:
                description: NodeList represents the node name which store the rules.
                items:
                  type: string
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: rules.rules.kubeedge.io
spec:
  group: rules.kubeedge.io
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                source:
                  description: |
                    source is a string value representing where the messages come from. Its
                    value is the same with ruleendpoint name. For example, my-rest or my-eventbus.
                  type: string
                sourceResource:
                  description: |
                    sourceResource is a map representing the resource info of source. For rest
                    rule-endpoint type its value is {"path":"/test"}. For eventbus ruleendpoint type its
                    value is {"topic":"<user define string>","node_name":"edge-node"}
                  type: object
                  additionalProperties:
                    type: string
                target:
                  description: |
                    target is a string value representing where the messages go to. its value is
                    the same with ruleendpoint name. For example, my-eventbus or my-rest or my-servicebus.
                  type: string
                targetResource:
                  description: |
                    targetResource is a map representing the resource info of target. For rest
                    rule-endpoint type its value is {"resource":"http://a.com"}. For eventbus ruleendpoint
                    type its value is {"topic":"/test"}. For servicebus rule-endpoint type its value is
                    {"path":"/request_path"}.
                  type: object
                  additionalProperties:
                    type: string
              required:
                - source
                - sourceResource
                - target
                - targetResource
            status:
              type: object
              properties:
                successMessages:
                  type: integer
                failMessages:
                  type: integer
                errors:
                  items:
                    type: string
                  type: array
  scope: Namespaced
  names:
    plural: rules
    singular: rule
    kind: Rule

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: ruleendpoints.rules.kubeedge.io
spec:
  group: rules.kubeedge.io
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                ruleEndpointType:
                  description: |
                    ruleEndpointType is a string value representing rule-endpoint type. its value is
                    one of rest/eventbus/servicebus.
                  type: string
                  enum:
                    - rest
                    - eventbus
                    - servicebus
                properties:
                  description: |
                    properties is not required except for servicebus rule-endpoint type. It is a map
                    value representing rule-endpoint properties. When ruleEndpointType is servicebus,
                    its value is {"service_port":"8080"}.
                  type: object
                  additionalProperties:
                    type: string
              required:
                - ruleEndpointType
  scope: Namespaced
  names:
    plural: ruleendpoints
    singular: ruleendpoint
    kind: RuleEndpoint
    shortNames:
```